<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Doppio18 üíô</title>
<style>
  body { font-family: 'Poppins', sans-serif; background: linear-gradient(135deg, #065369, #044152); text-align: center; padding: 20px; margin: 0; min-height: 100vh; display: flex; flex-direction: column; align-items: center; color: #a5c2c9; }
  h1 { color: #a5c2c9; font-size: 2rem; margin-bottom: 10px; }
  #turnCounter { font-weight: bold; font-size: 1.2rem; margin: 10px 0; color: #a5c2c9; }
  .mazzi, .carte-scoperte { display: flex; justify-content: center; gap: 25px; margin: 10px 0; flex-wrap: wrap; }
  .mazzo { background-color: #06627a; color: #a5c2c9; border-radius: 15px; width: 80px; height: 120px; display: flex; justify-content: center; align-items: center; font-size: 18px; box-shadow: 0 4px 8px rgba(0,0,0,0.5); }
  .carta { background: #ffffff; border: 3px solid #0a6b83; border-radius: 15px; width: 120px; height: 160px; display: flex; justify-content: center; align-items: center; font-size: 1.5rem; font-weight: bold; padding: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.3); color: #a5c2c9; transition: color 0.3s, border-color 0.3s; cursor: pointer; }
  .carta.sfida { border-color: #17cafc; color: #17cafc; }
  .carta.obbligo { border-color: #ba0000; color: #ba0000; }
  .carta.speciale { border-color: #bb0bd6; color: #bb0bd6; }
  button { margin: 8px; padding: 12px 22px; font-size: 1rem; border: none; border-radius: 25px; font-weight: bold; color: white; box-shadow: 0 4px 8px rgba(0,0,0,0.3); transition: transform 0.2s, background 0.3s; }
  button:active { transform: scale(0.95); }
  button:hover { opacity: 0.9; }
  button.scopri { background: linear-gradient(45deg, #ffd700, #ffea70); color: #333; text-shadow: 0 0 5px rgba(255,255,255,0.7); }
  #scoreBoard { margin-top: 15px; font-size: 1rem; background: #0a6b83; border-radius: 15px; padding: 10px; width: 90%; max-width: 350px; box-shadow: 0 4px 8px rgba(0,0,0,0.3); }
  #scoreBoard p { margin: 5px 0; color: #a5c2c9; }
  #scoreBoard button { background: #044f5f; color: #a5c2c9; }
  .history-button { position: fixed; top: 50%; transform: translateY(-50%); font-size: 2rem; background: none; border: none; cursor: pointer; color: #a5c2c9; }
  #history1 { left: 10px; }
  #history2 { right: 10px; }
  .dice-button { position: fixed; bottom: 20px; right: 20px; font-size: 2rem; background: #ffd700; color: #333; border-radius: 50%; width: 60px; height: 60px; display: flex; justify-content: center; align-items: center; cursor: pointer; box-shadow: 0 4px 8px rgba(0,0,0,0.5); }
  .drawer { position: fixed; top: 0; width: 80%; max-width: 300px; height: 100%; background: rgba(10,107,131,0.95); color: #a5c2c9; box-shadow: 0 0 15px rgba(0,0,0,0.6); overflow-y: auto; transition: transform 0.3s ease; padding: 20px; z-index: 1000; }
  .drawer.left { left: 0; transform: translateX(-100%); }
  .drawer.right { right: 0; transform: translateX(100%); }
  .drawer.open { transform: translateX(0); }
  .drawer h2, .drawer h3 { color: #a5c2c9; }
  .drawer ul { list-style: none; padding: 0; margin: 0 0 15px; }
  .drawer li { background: rgba(255,255,255,0.1); margin: 5px 0; padding: 6px 8px; border-radius: 8px; font-size: 1.5rem; display: flex; align-items: center; }
  .tipo { width: 15px; height: 15px; border-radius: 50%; display: inline-block; margin-right: 8px; }
  .tipo.sfida { background: #17cafc; }
  .tipo.obbligo { background: #ba0000; }
  .tipo.speciale { background: #bb0bd6; }
  .close-drawer { position: absolute; top: 10px; right: 15px; font-size: 1.5rem; cursor: pointer; color: #a5c2c9; }
  #randomOverlay, #diceMenu { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 2000; justify-content: center; align-items: center; flex-direction: column; }
  #randomCard { background: white; border-radius: 20px; padding: 30px; font-size: 2rem; font-weight: bold; color: #044152; box-shadow: 0 0 20px rgba(255,255,255,0.7); animation: pop 1s ease; }
  #diceMenu button { margin: 10px; padding: 15px 25px; font-size: 1.2rem; background: #044f5f; color: #a5c2c9; border-radius: 15px; border: none; cursor: pointer; }
  @keyframes pop { 0% { transform: scale(0); opacity: 0; } 60% { transform: scale(1.2); opacity: 1; } 100% { transform: scale(1); } }
</style>
</head>
<body>
<h1>Doppio18 üíô</h1>
<div id="turnCounter">Turno: 1 | Giocatore 1</div>
<div class="mazzi">
  <div id="mazzo1" class="mazzo">18</div>
  <div id="mazzo2" class="mazzo">18</div>
</div>
<div class="carte-scoperte">
  <div id="carta1" class="carta" onclick="scegliCarta('sinistra')">?</div>
  <div id="carta2" class="carta" onclick="scegliCarta('destra')">?</div>
</div>
<div>
  <button class="scopri" onclick="scopriCarte()">üîç Scopri carte</button>
</div>
<div id="scoreBoard">
  <p>üèÜ Giocatore 1: <span id="score1">0</span></p>
  <p>üèÜ Giocatore 2: <span id="score2">0</span></p>
  <button onclick="addPoint(1)">+1 Giocatore 1</button>
  <button onclick="addPoint(2)">+1 Giocatore 2</button>
</div>
<button id="history1" class="history-button" onclick="toggleDrawer('left')">‚è±Ô∏è</button>
<button id="history2" class="history-button" onclick="toggleDrawer('right')">‚è±Ô∏è</button>
<div class="dice-button" onclick="openDiceMenu()">üé≤</div>
<div id="drawer-left" class="drawer left">
  <span class="close-drawer" onclick="toggleDrawer('left')">‚úñ</span>
  <h2>Giocatore 1</h2>
  <h3>Carte Scelte</h3>
  <ul id="scelte1"></ul>
  <h3>Carte Scartate</h3>
  <ul id="scartate1"></ul>
</div>
<div id="drawer-right" class="drawer right">
  <span class="close-drawer" onclick="toggleDrawer('right')">‚úñ</span>
  <h2>Giocatore 2</h2>
  <h3>Carte Scelte</h3>
  <ul id="scelte2"></ul>
  <h3>Carte Scartate</h3>
  <ul id="scartate2"></ul>
</div>
<div id="randomOverlay" onclick="closeRandomOverlay()">
  <div id="randomCard"></div>
</div>
<div id="diceMenu">
  <button onclick="randomTotale()">üé≤ Random Totale</button>
  <button onclick="sfidaCasuale()">‚öîÔ∏è Sfida Casuale</button>
  <button onclick="randomPassato()">üïí Random Passato</button>
  <button onclick="closeDiceMenu()">‚úñ Chiudi</button>
</div>
<script>
const carte=["Cala e Scopri","Trentuno","Bella a scopa","Rigori","Mazzo","Tivit","Corsa dei Cavalli","Testa Croce","Bandiere","Canzone","Tris","Forza 4","Random Passato","Impiccato","Numeri in Codice","Formichina","Planck","Ruba Indumento","Bacio Rubato","Lunghezza d'onda I","Lunghezza d'onda S","Sfida Casuale","Random Totale","1 shottino","2 shottini","Switch Obbligato","Ripeti Sfida di Prima","Sceglie l'avversario","Il Migliore beve","Switch Speciale","Scommessa","Comando","Sfida Precedente","Cambio","Blocco","Scelta Finale"];
let mazzo1=[], mazzo2=[], cartaSinistra=null, cartaDestra=null, turno=1, giocatore=1;
let scelte={1:[],2:[]}, scartate={1:[],2:[]}, score={1:0,2:0};
function mischia(array){for(let i=array.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[array[i],array[j]]=[array[j],array[i]];}return array;}
function inizializza(){const mazzoMischiato=mischia([...carte]);mazzo1=mazzoMischiato.slice(0,18);mazzo2=mazzoMischiato.slice(18);aggiornaMazzi();}
function aggiornaMazzi(){document.getElementById('mazzo1').innerText=mazzo1.length;document.getElementById('mazzo2').innerText=mazzo2.length;}
function getTipoCarta(nome){const sfide=carte.slice(0,23), obblighi=carte.slice(23,29), speciali=carte.slice(29,36);if(sfide.includes(nome))return'sfida';if(obblighi.includes(nome))return'obbligo';if(speciali.includes(nome))return'speciale';return'';}
function scopriCarte(){if(!mazzo1.length||!mazzo2.length)return;cartaSinistra=mazzo1[0];cartaDestra=mazzo2[0];const carta1El=document.getElementById('carta1');const carta2El=document.getElementById('carta2');carta1El.innerText=cartaSinistra;carta2El.innerText=cartaDestra;carta1El.className='carta '+getTipoCarta(cartaSinistra);carta2El.className='carta '+getTipoCarta(cartaDestra);}
function scegliCarta(lato){if(!cartaSinistra||!cartaDestra)return;let scelta,scarto;if(lato==='sinistra'){scelta=cartaSinistra;scarto=cartaDestra;}else{scelta=cartaDestra;scarto=cartaSinistra;}scelte[giocatore].push({nome:scelta,tipo:getTipoCarta(scelta)});scartate[giocatore].push({nome:scarto,tipo:getTipoCarta(scarto)});
function renderItem(c){return '<li><span class="tipo '+c.tipo+'"></span>'+c.nome+'</li>';}
document.getElementById('scelte'+giocatore).innerHTML=scelte[giocatore].map(renderItem).join('');
document.getElementById('scartate'+giocatore).innerHTML=scartate[giocatore].map(renderItem).join('');
mazzo1.shift();mazzo2.shift();cartaSinistra=null;cartaDestra=null;
document.getElementById('carta1').innerText='?';document.getElementById('carta2').innerText='?';document.getElementById('carta1').className='carta';document.getElementById('carta2').className='carta';
giocatore=giocatore===1?2:1;turno++;document.getElementById('turnCounter').innerText='Turno: '+turno+' | Giocatore '+giocatore;aggiornaMazzi();}
function addPoint(num){score[num]++;document.getElementById('score'+num).innerText=score[num];}
function toggleDrawer(lato){const drawer=document.getElementById('drawer-'+lato);drawer.classList.toggle('open');}
function mostraRandomTotale(){const overlay=document.getElementById('randomOverlay');const cardDiv=document.getElementById('randomCard');const randomIndex=Math.floor(Math.random()*carte.length);const nome=carte[randomIndex];cardDiv.innerText=nome;overlay.style.display='flex';}
function closeRandomOverlay(){document.getElementById('randomOverlay').style.display='none';}
function openDiceMenu(){document.getElementById('diceMenu').style.display='flex';}
function closeDiceMenu(){document.getElementById('diceMenu').style.display='none';}
function randomTotale(){mostraRandomTotale();}
function sfidaCasuale(){const sfide=carte.slice(0,23);const nome=sfide[Math.floor(Math.random()*sfide.length)];document.getElementById('randomCard').innerText=nome;document.getElementById('randomOverlay').style.display='flex';}
function randomPassato(){const passate=[...scelte[1],...scelte[2],...scartate[1],...scartate[2]];if(passate.length===0)return alert('Nessuna carta gi√† uscita!');const nome=passate[Math.floor(Math.random()*passate.length)].nome;document.getElementById('randomCard').innerText=nome;document.getElementById('randomOverlay').style.display='flex';}
inizializza();
</script>
</body>
</html>
